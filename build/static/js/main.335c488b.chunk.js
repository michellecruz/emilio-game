(this["webpackJsonpmilio-food"]=this["webpackJsonpmilio-food"]||[]).push([[0],{11:function(t,e,a){t.exports=a(18)},16:function(t,e,a){},17:function(t,e,a){},18:function(t,e,a){"use strict";a.r(e);var o,i,n,s,r,l,c,d,p,y,u,m,x,b,w,h,f,z,v,g,k,E,M,K,j,S,C,P,T,N,W,q=a(1),D=a.n(q),O=a(7),R=a.n(O),A=(a(16),a(2)),H=a(8),B=a(3),F=a(4),I=a(0),L=a(9),J=a(10),X=[],Z=[],_=1.4,U=!1,V=0,G=!1,Q=!1,Y=0,$=4*window.innerWidth,tt=4*window.innerHeight,et=500,at=function(t){Object(F.a)(a,t);var e=Object(B.a)(a);function a(){var t;Object(A.a)(this,a);for(var q=arguments.length,D=new Array(q),O=0;O<q;O++)D[O]=arguments[O];return(t=e.call.apply(e,[this].concat(D))).state={timeElapsed:0,width:window.innerWidth,height:window.innerHeight,shadow:{blur:3.5,darkness:1,opacity:1},plane:{color:"#ffffff",opacity:1},kibbleEaten:0,totalKibble:X.length,emilio:{isEating:!1,isTwirling:null,position:{x:-700,y:500,z:0},rotation:{x:0,y:6.5,z:0}}},t.init=function(){var e=document.querySelector(".container"),a=document.querySelector(".emiliocanvas");l=(new I.q).load("img/060420-emilio-0.jpg"),c=(new I.q).load("img/060420-emilio-1.jpg"),u=(new I.q).load("img/kibble.jpg"),(o=new I.k(50,window.innerWidth/window.innerHeight,1,1e4)).position.set(0,400,2e3),(i=new I.n).background=new I.b(16777215),r=new I.p(100,32,32),(d=new I.g({map:l})).side=I.d,(p=new I.f(r,d)).name="Emilio",(f=new I.f).visible=!1,z=new I.i,f.add(z),v=new I.r,z.position.set(0,0,2e3),p.position.x=t.state.emilio.position.x,p.position.y=t.state.emilio.position.y,p.position.z=t.state.emilio.position.z,p.rotation.x=t.state.emilio.rotation.x,p.rotation.y=t.state.emilio.rotation.y,p.rotation.z=t.state.emilio.rotation.z,i.add(p),i.add(f),t.addShadow(),t.addKibble(),w=new I.m,(n=new I.t({antialias:!0})).setPixelRatio(window.devicePixelRatio),n.setSize(t.state.width,t.state.height),e.replaceChild(n.domElement,a),s=n.getContext("2d").canvas,t.setState({width:s.clientWidth,height:s.clientHeight})},t.animate=function(){requestAnimationFrame(t.animate),t.setState({timeElapsed:t.state.timeElapsed+1}),t.state.kibbleEaten>=50&&t.state.kibbleEaten<=100?(p.position.x+=30,_=1.8):t.state.kibbleEaten>100&&t.state.kibbleEaten<=700?(p.position.x+=40,_=2.2):t.state.kibbleEaten>700?(p.position.x+=60,_=2.6):p.position.x+=20,f.position.x=p.position.x,f.position.y=p.position.y,k.position.x=p.position.x,p.position.y>10?Q||(p.position.y-=10):p.position.y=0,(g=new I.r).set(p.position.x,p.position.y,0).normalize(),g.cross(I.i.DefaultUp),p.rotateOnAxis(g,-.05*_),v.setFromMatrixPosition(z.matrixWorld),o.position.lerp(v,.8),o.lookAt(f.position),o.updateProjectionMatrix();var e=i.background;i.background=null,j.visible=!1,i.overrideMaterial=S,n.setRenderTarget(E),n.render(i,K),i.overrideMaterial=null,j.visible=!0,t.blurShadow(t.state.shadow.blur),t.blurShadow(.4*t.state.shadow.blur),n.setRenderTarget(null),i.background=e,p.position.y<=0&&!G&&(p.material.map=l),t.eatKibble(),Q&&t.jump(),U?V+=1:V=0,t.twirl(),G&&t.eat(),n.render(i,o),o.updateProjectionMatrix()},t.addShadow=function(){(k=new I.e).position.y=-100,i.add(k),(E=new I.s(512,512)).texture.generateMipmaps=!1,(M=new I.s(512,512)).texture.generateMipmaps=!1;var e=new I.l($,tt).rotateX(Math.PI/2),a=new I.g({map:E.texture,opacity:t.state.shadow.opacity,transparent:!0});T=new I.f(e,a),k.add(T),T.scale.y=-1,(N=new I.f(e)).visible=!1,k.add(N),a=new I.g({color:t.state.plane.color,opacity:t.state.plane.opacity,transparent:!0}),(W=new I.f(e,a)).rotateX(Math.PI/2),k.add(W),(K=new I.j(-$/2,$/2,tt/2,-tt/2,0,et)).rotation.x=Math.PI/2,k.add(K),j=new I.a(K),(S=new I.h).userData.darkness={value:t.state.shadow.darkness},S.onBeforeCompile=function(t){t.uniforms.darkness=S.userData.darkness,t.fragmentShader="\n        uniform float darkness;\n        ".concat(t.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * darkness );"),"\n    ")},S.depthTest=!1,S.depthWrite=!1,(C=new I.o(L.a)).depthTest=!1,(P=new I.o(J.a)).depthTest=!1},t.blurShadow=function(e){N.visible=!0,N.material=C,N.material.uniforms.tDiffuse.value=E.texture,C.uniforms.h.value=1*e/t.state.width*2,n.setRenderTarget(M),n.render(N,K),N.material=P,N.material.uniforms.tDiffuse.value=M.texture,P.uniforms.v.value=1*e/t.state.height*2,n.setRenderTarget(E),n.render(N,K),N.visible=!1},t.addKibble=function(){y=new I.c(100,100,200,200),(m=new I.g({map:u})).side=I.d;for(var e=0;e<5;e++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=100+400*e,x.position.y=0,x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var a=0;a<50;a++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=2100+300*a,x.position.y=Math.abs(1e3*Math.sin(.25*a)+0),x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var o=0;o<10;o++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=17200+400*o,x.position.y=400+100*o,x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var n=0;n<10;n++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=21600+400*n,x.position.y=850+100*n,x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var s=0;s<50;s++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=26e3+300*s,x.position.y=1850,x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var r=0;r<11;r++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=41e3+400*r,x.position.y=1850-100*r,x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var l=0;l<100;l++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=45600+400*l,x.position.y=Math.abs(500*Math.sin(.25*l)+500),x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var c=0;c<2;c++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=85520,x.position.y=250+250*c,x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var d=0;d<20;d++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=85800+200*d,x.position.y=100,x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var b=0;b<20;b++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=85800+200*b,x.position.y=350,x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var w=0;w<20;w++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=85800+200*w,x.position.y=600,x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var h=0;h<80;h++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=89950+400*h,x.position.y=Math.abs(500*Math.sin(.25*h)+500),x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);for(var f=0;f<222;f++)(x=new I.f(y,m)).rotation.x=p.rotation.x,x.rotation.y=p.rotation.y,x.rotation.z=p.rotation.z,x.position.x=37700*Math.random()+122300,x.position.y=200*Math.random()+200,x.scale.set(x.scale.x=.8*x.scale.x,x.scale.y=.8*x.scale.y,x.scale.z=.8*x.scale.z),x.name="Kibble",i.add(x),X.push(x);t.setState({totalKibble:X.length})},t.eatKibble=function(){w.set(p.position,new I.r(-1,1,0)),p.geometry.computeBoundingBox(),h=w.intersectObjects(X),G=!1,h.length>0?(G=!0,b=h[0].object.uuid,Z.includes(b)||(Z.push(b),t.setState({emilio:{isEating:!0},kibbleEaten:t.state.kibbleEaten+1}))):(G=!1,t.setState({emilio:{isEating:!1}}));for(var e=0;e<h.length;e++)h.length>0&&"Kibble"===h[e].object.name&&(h[e].object.visible=!1)},t.eat=function(){U||(p.rotation.x=-.2,p.rotation.y=6.5,p.rotation.z=-1.2),p.material.map=c},t.twirl=function(){switch(U){case!0:p.rotation.z=-1.2,p.rotation.x=-.1,p.rotation.y=V,p.rotation.y>=34&&(p.rotation.y=34.4);break;case!1:p.rotation.x=0,p.rotation.y=6.5;break;default:return}},t.jump=function(){(Y+=Y+1)<=150?p.position.y<4e3&&(p.position.y+=30+2*Math.sin(Y)):(Q=!1,Y=0)},t.rotateCamera=function(){t.state.width<t.state.height&&(tt=4*window.innerWidth,$=4*window.innerHeight,et=500,o.up=new I.r(-1,0,0),o.updateProjectionMatrix(),document.body.classList.add("mobile"))},t}return Object(H.a)(a,[{key:"componentDidMount",value:function(){this.init(),this.animate(),this.rotateCamera(),document.addEventListener("keydown",(function(t){if(32===t.keyCode&&(Q=!0),84===t.keyCode)switch(U){case!1:U=!0;break;case!0:U=!1;break;default:return}if(40===t.keyCode){var e=p.position;e>0&&p.position.lerpVectors(new I.r(e.x,e.y,0),new I.r(p.position.x,p.position.y-60,0),.1)}if(39===t.keyCode){var a=p.position.x;p.position.lerp(new I.r(a+5e3,p.position.y,0),.1),console.log(a)}})),window.addEventListener("touchstart",(function(){Q=!0}))}},{key:"render",value:function(){return D.a.createElement("div",{className:"container"},D.a.createElement("div",{className:"note"},D.a.createElement("span",{className:"desktop"},"press the spacebar"),D.a.createElement("span",{className:"mobile-div"},"tap to jump")),D.a.createElement("div",{id:"count",className:"".concat(this.state.emilio.isEating?"active":"")},this.state.kibbleEaten," / ",this.state.totalKibble),D.a.createElement("div",{className:"emiliocanvas"}))}}]),a}(q.Component);a(17);var ot=function(){return D.a.createElement("div",{className:"App"},D.a.createElement(at,null))};R.a.render(D.a.createElement(D.a.StrictMode,null,D.a.createElement(ot,null)),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.335c488b.chunk.js.map